{% extends "base.html" %}
{% block content %}
{% load static %}

<div class="osahan-listing">
    <div class="osahan-header-nav shadow-sm p-3 d-flex align-items-center bg-danger">
       <h5 class="font-weight-normal mb-0 text-white">
          <a class="text-danger" href="home.html"><i class="icofont-rounded-left"></i></a> &nbsp; Bus Search Routes
       </h5>
       <div class="ml-auto d-flex align-items-center">
          <a href="home.html" class="text-white h6 mb-0"><i class="icofont-search-1"></i></a>
          <a href="#" class="mx-4 text-white h6 mb-0" data-toggle="modal" data-target="#filterModal"><i class="icofont-filter"></i></a>
          <a class="toggle osahan-toggle h4 m-0 text-white ml-auto" href="#"><i class="icofont-navigation-menu"></i></a>
       </div>
    </div>
    <div class="osahan-listing p-0 m-0 row border-top">
       <div class="p-2 border-bottom w-100">
          <div class="bg-white border border-warning rounded-1 shadow-sm p-2">
             <div class="row mx-0 px-1">
                <div class="col-6 p-0">
                   <small class="text-muted mb-1 f-10 pr-1">GOING FROM</small>
                   <p class="small mb-0">{{ request.GET.from_post_code }}</p>
                </div>
                <div class="col-6 p-0">
                   <small class="text-muted mb-1 f-10 pr-1">GOING TO</small>
                   <p class="small mb-0">{{ request.GET.to_post_code }}</p>
                </div>
             </div>
          </div>
       </div>
       <!-- List Item -->
       {% for route in routes.routes %}
       <a href="bus-details.html" class="text-dark col-6 px-0">
         <div class="list_item_gird m-0 bg-white shadow-sm listing-item border-bottom border-right">
             <div class="px-3 pt-3 tic-div">
                 <div class="list-item-img">
                     <img src="{% static 'img/listing/item1.png' %}" class="img-fluid">
                 </div>
                 <p class="mb-0 l-hght-10">Route {{ forloop.counter }} - {{ route.duration|slice:"3:" }} mins</p>
                 {% with route_data=route.route_parts %}
                 {% for leg in route_data %}
                 <div>
                     <div class="p-3 d-flex">
                         <div class="bus_details w-100">
                             <small class="text-muted mb-2 d-block">
                                 {{ leg.departure_time }} &nbsp;&nbsp;{{ leg.from_point_name }}<br>
                             </small>
                             <div>
                                 <span class="mode mode-{{ leg.mode }}"></span>
                                 {% if leg.mode == "bus" %}
                                 <button type="button" "><img src="{% static 'img/logo.png' %}" style="width: 24px; height: 24px;" /> 
                                 <strong>{{ leg.line_name }}</strong></button> Ride for
                                 {% endif %}
                                 {% if leg.mode != "bus" %}
                                 <img src="{% static 'images/walk.svg' %}" alt="{{ leg.mode }}" /> Walk
                                 {% endif %}
                                 {{ leg.duration|slice:"3:" }} mins
                                 {% if leg.suggested_bus %}
                                 <p>Bus Rating: 
                                    {% if leg.suggested_bus == 5 %}
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                        <span class="text-dark">Likely to be Very Early</span>
                                    {% elif leg.suggested_bus == 4 %}
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-muted"></i>
                                        <span class="text-dark">Somewhat Early</span>
                                    {% elif leg.suggested_bus == 3 %}
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <span class="text-dark">On time</span><!-- Add code for rating 3 -->
                                    {% elif leg.suggested_bus == 2 %}
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <span class="text-dark">Somewhat Late</span> <!-- Add code for rating 2 -->
                                    {% elif leg.suggested_bus == 1 %}
                                    <i class="icofont-star text-danger"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <i class="icofont-star text-muted"></i>
                                    <span class="text-dark">Likely to be Late</span>  <!-- Add code for rating 1 -->
                                    {% else %}
                                        <!-- Default code if none of the above conditions are met -->
                                    {% endif %}
                                </p>
                                
                                 {% endif %}
                             </div>
                         </div>
                     </div>
                 </div>
                 {% endfor %}
                 {% endwith %}
             </div>
         </div>
     </a>
     
       {% endfor %}


       
    </div>
 </div>
 <!-- Filter Modal -->
 <div class="modal fade" id="filterModal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog m-0">
       <div class="modal-content modal-content rounded-0 border-0 vh-100">
          <form>
             <div class="osahan-header-nav shadow-sm p-3 d-flex align-items-center bg-danger">
                <h5 class="font-weight-normal mb-0 text-white">
                   <a data-dismiss="modal" aria-label="Close" class="text-danger"><i class="icofont-rounded-left mr-3"></i></a>
                   Filter By
                </h5>
                <div class="ml-auto d-flex align-items-center">
                   <a href="#" class="text-white mr-3">Clear all</a>
                   <a class="toggle osahan-toggle h4 m-0 text-white ml-auto hc-nav-trigger hc-nav-1" href="#" role="button" aria-controls="hc-nav-1"><i class="icofont-navigation-menu"></i></a>
                </div>
             </div>
             <div class="modal-body p-3">
                <div class="mb-4">
                   <div class="d-flex">
                      <p class="mb-2 text-dark font-weight-bold">Optimal Route</p>
                   </div>
                   <div class="custom-control custom-radio custom-control-inline">
                      <input type="radio" id="customRadioclass1" name="customRadioclass1" class="custom-control-input">
                      <label class="custom-control-label small" for="customRadioclass1">Arrive early</label>
                   </div>
                   <div class="custom-control custom-radio custom-control-inline">
                      <input type="radio" id="customRadioclass2" name="customRadioclass1" class="custom-control-input">
                      <label class="custom-control-label small" for="customRadioclass2">Ontime</label>
                   </div>
                   <div class="custom-control custom-radio custom-control-inline">
                      <input type="radio" id="customRadioclass3" name="customRadioclass1" class="custom-control-input">
                      <label class="custom-control-label small" for="customRadioclass3">Late</label>
                   </div>
                </div>
                
             </div>
             <div class="modal-footer border-0 fixed-bottom">
                <button type="button" data-dismiss="modal" aria-label="Close" class="btn btn-danger btn-block osahanbus-btn py-3">APPLY FILTER</button>
             </div>
          </form>
       </div>
    </div>
 </div>


{% endblock %}
